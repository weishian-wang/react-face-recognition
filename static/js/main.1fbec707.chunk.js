(this["webpackJsonpreact-face-recognition"]=this["webpackJsonpreact-face-recognition"]||[]).push([[0],{17:function(e,t){e.exports="data:image/png;base64,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"},20:function(e,t,a){e.exports=a(57)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),s=a.n(o),i=(a(25),a(16)),c=a(2),l=a(3),m=a(5),u=a(4),h=a(6),d=(a(26),function(e){var t=e.isSignedIn,a=e.onRouteChange,n=e.email;return t?r.a.createElement("nav",null,r.a.createElement("p",{className:"f5 dark-gray underline pt4 pr2"},n),r.a.createElement("p",{onClick:function(){return a("signout")},className:"f3 link dim black underline pa3 pointer"},"Sign Out")):r.a.createElement("nav",null,r.a.createElement("p",{onClick:function(){return a("signin")},className:"f3 link dim black underline pa3 pointer"},"Sign In"),r.a.createElement("p",{onClick:function(){return a("register")},className:"f3 link dim black underline pa3 pointer"},"Register"))}),g=a(17),p=a.n(g),E=a(18),b=a.n(E),f=(a(27),function(){return r.a.createElement("div",{className:"ma4"},r.a.createElement(b.a,{className:"Tilty br2 shadow-2",options:{max:55}},r.a.createElement("img",{src:p.a,alt:"logo",className:"image"})))}),w=function(e){var t=e.name,a=e.entries;return r.a.createElement("div",null,r.a.createElement("div",{className:"white f3"},"".concat(t,", your current entry count is...")),r.a.createElement("div",{className:"white f1"},"".concat(a)))},N=(a(28),function(e){var t=e.onInputChange,a=e.onImageSubmit;return r.a.createElement("div",null,r.a.createElement("p",{className:"f3"},"This Smart Brain will detect faces in your pictures. Give it a try : )"),r.a.createElement("p",{className:"f3"},"Please enter a publicly accessible URL of image:"),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"form center pa4 br3 shadow-5"},r.a.createElement("input",{className:"f4 pa2 w-80 center",type:"text",onChange:t}),r.a.createElement("button",{className:"w-20 grow f4 link ph3 pv2 dib white bg-light-purple pointer",onClick:a},"Detect"))))}),v=(a(29),function(e){var t=e.box;return r.a.createElement("div",{className:"bounding-box",style:{top:t.topRow,right:t.rightCol,bottom:t.bottomRow,left:t.leftCol}})}),y=(a(30),function(e){var t=e.imageUrl,a=e.boxes.map((function(e,t){return r.a.createElement(v,{box:e,key:t})}));return r.a.createElement("div",{className:"center ma"},r.a.createElement("div",{className:"absolute mt2"},r.a.createElement("img",{id:"inputImage",src:t,alt:""}),a))}),j=a(7),R={email:{isRequired:"Email address is required",isEmail:"Please enter a valid email"},password:{isRequired:"Password is also required",isMinLength:{message:"Password must at least be 8 characters long",length:8}}},O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onEmailChange=function(e){a.setState({email:e.target.value})},a.onPasswordChange=function(e){a.setState({password:e.target.value})},a.onSubmitSignIn=function(e){e.errors,e.fields;e.isValid&&fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-face-recognition"}).REACT_APP_DOMAIN,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.state.email,password:a.state.password})}).then((function(e){return e.json()})).then((function(e){if(e.errorMsg)throw a.props.handleError(e.errorMsg),new Error(e.errorMsg);e.userData.user_id&&e.token&&(a.props.loadUser(e.userData,e.token),a.props.onRouteChange("home"))})).catch(console.log)},a.state={email:"",password:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onRouteChange;return r.a.createElement("article",{className:"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement(j.FormValidation,{config:R,onSubmit:this.onSubmitSignIn,className:"measure"},(function(a){var o=a.errors,s=a.submitted;return r.a.createElement(n.Fragment,null,r.a.createElement("fieldset",{id:"sign_in",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f2 fw6 ph0 mh0"},"Sign In"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email",id:"email",onChange:e.onEmailChange}),s&&o.email&&r.a.createElement("span",{className:"dark-red fw6"},o.email)),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:e.onPasswordChange}),s&&o.password&&r.a.createElement("span",{className:"dark-red fw6"},o.password))),r.a.createElement("div",null,r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in"})),r.a.createElement("div",{className:"lh-copy mt3"},r.a.createElement("p",{className:"f6 link dim black db pointer",onClick:function(){return t("register")}},"Register")))}))))}}]),t}(n.Component),I={name:{isRequired:"Your name is required",isMinLength:{message:"Your name must at least be 2 characters long",length:2},isMaxLength:{message:"Your name can at most have 50 characters",length:50}},email:{isRequired:"Email address is required",isEmail:"Please enter a valid email"},password:{isRequired:"Password is also required",isMinLength:{message:"Password must at least be 8 characters long",length:8}}},C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onNameChange=function(e){a.setState({name:e.target.value})},a.onEmailChange=function(e){a.setState({email:e.target.value})},a.onPasswordChange=function(e){a.setState({password:e.target.value})},a.onSubmitRegister=function(e){e.errors,e.fields;e.isValid&&fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-face-recognition"}).REACT_APP_DOMAIN,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.state.name,email:a.state.email,password:a.state.password})}).then((function(e){return 200===e.status&&a.props.onRouteChange("signin"),e.json()})).then((function(e){if(e.errorMsg)throw a.props.handleError(e.errorMsg),new Error(e.errorMsg)})).catch(console.log)},a.state={name:"",email:"",password:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("article",{className:"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement(j.FormValidation,{config:I,onSubmit:this.onSubmitRegister,className:"measure"},(function(t){var a=t.errors,o=t.submitted;return r.a.createElement(n.Fragment,null,r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f2 fw6 ph0 mh0"},"Register"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"name"},"Name"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"name",id:"name",onChange:e.onNameChange}),o&&a.name&&r.a.createElement("span",{className:"dark-red fw6"},a.name)),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email",id:"email",onChange:e.onEmailChange}),o&&a.email&&r.a.createElement("span",{className:"dark-red fw6"},a.email)),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:e.onPasswordChange}),o&&a.password&&r.a.createElement("span",{className:"dark-red fw6"},a.password))),r.a.createElement("div",null,r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Register"})))}))))}}]),t}(n.Component),k=a(19),M=a.n(k),x=(a(54),{particles:{number:{value:50,density:{enable:!0,value_area:400}}}}),S=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"render",value:function(){return r.a.createElement(M.a,{className:"particles",params:x})}}]),t}(n.Component);a(55);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={isSignedIn:!1,input:"",imageUrl:"",boxes:[],route:"signin",user:{user_id:"",name:"",email:"",entries:0,joined:""},token:null,showError:!1,errorMessage:""},U=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleError=function(t){e.setState({showError:!0,errorMessage:t})},e.clearError=function(){e.setState({showError:!1,errorMessage:""})},e.onRouteChange=function(t){e.clearError(),"signout"===t?e.handleSignout():"home"===t&&e.setState({isSignedIn:!0}),e.setState({route:t})},e.handleSignout=function(){e.setState(D),localStorage.removeItem("user_id"),localStorage.removeItem("token"),localStorage.removeItem("expiryDate")},e.loadUser=function(t,a){e.setState({user:A({},t),token:a}),localStorage.setItem("user_id",t.user_id),localStorage.setItem("token",a);var n=new Date((new Date).getTime()+36e5);localStorage.setItem("expiryDate",n.toISOString())},e.calculateFaceLocation=function(e){var t=document.getElementById("inputImage"),a=Number(t.width),n=Number(t.height);return e.outputs[0].data.regions.map((function(e){var t=e.region_info.bounding_box,r=t.top_row,o=t.right_col,s=t.bottom_row,i=t.left_col;return{topRow:r*n,rightCol:a-o*a,bottomRow:n-s*n,leftCol:i*a}}))},e.displayFaceBoundingBox=function(t){e.setState({boxes:t})},e.clearFaceBoundingBox=function(){e.setState({boxes:[]})},e.onInputChange=function(t){e.setState({input:t.target.value})},e.onImageSubmit=function(){e.clearError(),e.clearFaceBoundingBox(),e.setState({imageUrl:e.state.input}),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-face-recognition"}).REACT_APP_DOMAIN,"/imageurl"),{method:"POST",headers:{Authorization:"Bearer "+e.state.token,"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e.state.input})}).then((function(e){return e.json()})).then((function(t){if(t.errorMsg)throw e.handleError(t.errorMsg),new Error(t.errorMsg);if(1e4===t.status.code&&t.outputs[0].data.regions)return e.displayFaceBoundingBox(e.calculateFaceLocation(t)),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-face-recognition"}).REACT_APP_DOMAIN,"/image"),{method:"PUT",headers:{Authorization:"Bearer "+e.state.token,"Content-Type":"application/json"},body:JSON.stringify({user_id:e.state.user.user_id})}).then((function(e){return e.json()})).then((function(t){if(t.errorMsg)throw e.handleError(t.errorMsg),new Error(t.errorMsg);e.setState({user:A({},e.state.user,{entries:t})})}))})).catch(console.log)},e.state=D,e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="React Face Recognition";var t=localStorage.getItem("token"),a=localStorage.getItem("expiryDate");if(!t||!a||new Date(a)<=new Date)this.onRouteChange("signout");else{var n=localStorage.getItem("user_id");fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-face-recognition"}).REACT_APP_DOMAIN,"/profile/").concat(n),{method:"GET",headers:{Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(a){if(a.errorMsg)throw e.handleError(a.errorMsg),new Error(a.errorMsg);e.setState({user:A({},a),token:t}),e.onRouteChange("home")})).catch(console.log)}}},{key:"render",value:function(){var e=this.state,t=e.isSignedIn,a=e.imageUrl,o=e.boxes,s=e.route,i=e.user,c=e.showError,l=e.errorMessage;return r.a.createElement("div",{className:"App"},c&&r.a.createElement("div",{className:"error-message"},l),r.a.createElement(S,null),r.a.createElement("div",{className:"header"},r.a.createElement(f,null),r.a.createElement(d,{isSignedIn:t,onRouteChange:this.onRouteChange,email:i.email})),"home"===s?r.a.createElement(n.Fragment,null,r.a.createElement(w,{name:i.name,entries:i.entries}),r.a.createElement(N,{onInputChange:this.onInputChange,onImageSubmit:this.onImageSubmit}),r.a.createElement(y,{imageUrl:a,boxes:o})):"signin"===s||"signout"===s?r.a.createElement(O,{onRouteChange:this.onRouteChange,loadUser:this.loadUser,handleError:this.handleError}):r.a.createElement(C,{onRouteChange:this.onRouteChange,handleError:this.handleError}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(56);s.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.1fbec707.chunk.js.map